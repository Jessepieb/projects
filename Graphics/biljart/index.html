<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Three.js practice</title>
</head>
<body>
<div id="label" style="position: absolute; color: black"></div>
<script src="js/three.js"></script>
<script src="Table.js"></script>
<script src="Ball.js"></script>
<script src="Wall.js"></script>
<script src="Pocket.js"></script>
<!--<script src="js/OrbitControls.js"></script>-->
<script>
    //to do add orbit control

    var camera, renderer, scene, controls;
    const width = window.innerWidth;
    const height = window.innerHeight;


    var balls = [];
    const radius = 1;

    var table = null;
    function initCamera() {
        camera = new THREE.PerspectiveCamera(100, width / height, 0.1, 1000);
        camera.position.z = 15;
    }

    function initRenderer() {
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(width, height);
    }

    function init() {
        scene = new THREE.Scene();
        //scene.add(new THREE.AmbientLight(0x444444));

        scene.background = new THREE.Color('lightgray');
        table = new Table(width, height, scene);
        const ball = new Ball(0,0,radius, scene);
        balls[0] = (ball);
        //scene.add(balls);
        initCamera();
        initRenderer();

        document.body.appendChild(renderer.domElement);
    }

    var x = 0;
    function animate() {
        requestAnimationFrame(animate);
        //balls[0].location = new THREE.Vector2(Math.sin(x),Math.cos(x));
        //x+= 0.1;
        // Wall.Collide(table.)
        Wall.Collide(table.walls[3], balls[0]);
        balls[0].Move();
        // document.getElementById("label").innerHTML = balls[0].location.toArray().toString();
        renderer.render(scene, camera);
    }

    init();
    animate();
</script>
</body>
</html>